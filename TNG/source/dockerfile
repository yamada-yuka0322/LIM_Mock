# ベースイメージ: Ubuntu + 必要パッケージ
FROM ubuntu:22.04

# 非対話モードで apt を使う設定
ENV DEBIAN_FRONTEND=noninteractive

# 必要パッケージのインストール
RUN apt-get update && apt-get install -y \
    build-essential \
    libhdf5-dev \
    libcfitsio-dev \
    libgsl-dev \
    wget \
    git \
    zip \
    tar \
    make \
 && apt-get clean \
 && rm -rf /var/lib/apt/lists/*

RUN apt-get update && apt-get install -y python3 python3-pip

RUN pip install numpy matplotlib
# 作業ディレクトリを指定
WORKDIR /app

# ソースコードをコピー（同じディレクトリに置いたと仮定）
COPY . .

# ビルドを実行
ENV SYSTYPE=Docker
RUN make SYSTYPE=Docker

# デフォルトコマンド（任意で変更可）
CMD ["bash"]

